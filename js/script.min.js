jQuery(function($){"use strict";$(document).ready(function(){});$("#post-thumb, #gallery-post").slick({infinite:true,arrows:false,autoplay:true,autoplaySpeed:4000});$("#features").slick({infinite:true,arrows:false,autoplay:true,autoplaySpeed:4000});$('.image-popup').magnificPopup({type:'image',removalDelay:160,callbacks:{beforeOpen:function(){this.st.image.markup=this.st.image.markup.replace('mfp-figure','mfp-figure mfp-with-anim');this.st.mainClass=this.st.el.attr('data-effect');}},closeOnContentClick:true,midClick:true,fixedContentPos:false,fixedBgPos:true});$("#testimonials").slick({infinite:true,arrows:false,autoplay:true,autoplaySpeed:2000});$('#contact-submit').click(function(e){e.preventDefault();var error=false;var name=$('#name').val();var email=$('#email').val();var subject=$('#subject').val();var message=$('#message').val();if(name.length==0){var error=true;$('#name').css("border-color","#D8000C");}else{$('#name').css("border-color","#666");}
if(email.length==0||email.indexOf('@')=='-1'){var error=true;$('#email').css("border-color","#D8000C");}else{$('#email').css("border-color","#666");}
if(subject.length==0){var error=true;$('#subject').css("border-color","#D8000C");}else{$('#subject').css("border-color","#666");}
if(message.length==0){var error=true;$('#message').css("border-color","#D8000C");}else{$('#message').css("border-color","#666");}
if(error==false){$('#contact-submit').attr({'disabled':'false','value':'Sending...'});$.post("sendmail.php",$("#contact-form").serialize(),function(result){if(result=='sent'){$('#cf-submit').remove();$('#mail-success').fadeIn(500);}else{$('#mail-fail').fadeIn(500);$('#contact-submit').removeAttr('disabled').attr('value','Send The Message');}});}});});var wow=new WOW({offset:100,mobile:false});$(document).ready(function(){$('#preloader').fadeOut(200);wow.init();})
function initialize(){var latitude=$('#map-canvas').attr('data-latitude');var longitude=$('#map-canvas').attr('data-longitude');var myLatLng=new google.maps.LatLng(latitude,longitude);var roadAtlasStyles=[{"featureType":"landscape","elementType":"geometry.fill","stylers":[{"color":"#2F3238"}]},{"elementType":"labels.text.fill","stylers":[{"color":"#FFFFFF"}]},{"elementType":"labels.text.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"geometry.fill","stylers":[{"color":"#50525f"}]},{"featureType":"road","elementType":"geometry.stroke","stylers":[{"visibility":"on"},{"color":"#808080"}]},{"featureType":"poi","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#808080"}]},{"featureType":"water","elementType":"geometry.fill","stylers":[{"color":"#3071a7"},{"saturation":-65}]},{"featureType":"road","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"landscape","elementType":"geometry.stroke","stylers":[{"color":"#bbbbbb"}]}];var mapOptions={zoom:14,center:myLatLng,disableDefaultUI:true,scrollwheel:true,navigationControl:true,mapTypeControl:false,scaleControl:true,draggable:true,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,'roadatlas']}};var map=new google.maps.Map(document.getElementById('map-canvas'),mapOptions);var marker=new google.maps.Marker({position:myLatLng,map:map,title:'',});google.maps.event.addListener(marker,'click',function(){infowindow.open(map,marker);});var styledMapOptions={name:'US Road Atlas'};var usRoadMapType=new google.maps.StyledMapType(roadAtlasStyles,styledMapOptions);map.mapTypes.set('roadatlas',usRoadMapType);map.setMapTypeId('roadatlas');}
function changeValue(elementName,newValue){document.getElementsByName(elementName)[0].value=newValue;};$(document).ready(function(){$('form').submit(function(){if($('input[type="text"]#e-mail').val().length>0){$('form').attr('action','/');return false;}});});$(function(){$('#publications-expand').click(function(){var height=$('#publications-desc-inner').outerHeight();$('#publications-desc').css('max-height',height);$('#publications-expand').css('visibility','collapse')});$('#grant-expand').click(function(){var height=$('#grant-content-inner').outerHeight();$('#grant-content').css('max-height',height);$('#grant-expand').css('visibility','collapse')});$('#alumni-expand').click(function(){var height=$('#alumni-content-inner').outerHeight();$('#alumni-content').css('max-height',height);$('#alumni-expand').css('visibility','collapse')});$('#chinese-posting-inner-handle').click(function(event){var height=$('#chinese-posting-inner').outerHeight();$('#chinese-posting').css('max-height',height);event.preventDefault();});$('.nav-item').click(function(){if($('.navbar-toggler-icon').is(':visible')){$('.navbar-collapse').removeClass('show');}});$('.next').click(function(){$('.carousel').carousel('next');return false;});$('.prev').click(function(){$('.carousel').carousel('prev');return false;});});$(document).ready(function(){var screenWidth=$(window).width();if(screenWidth<800){$('video').removeAttr('autoplay');}else{$('video').attr('autoplay');}});function load_calendar(cal_id,holderId,dateRange,keywords){var holder=$(`#${holderId}`);var navi=$(`<ul class="nav nav-tabs" role="tablist">`);var tabs=$(`<div class="tab-content">`);holder.append(navi).append(tabs);navi.append($(`<li class="nav-item">`).append($(`<a class="nav-link active" id="${holderId}-schedule-tab" data-toggle="tab" href="#${holderId}-schedule" role="tab"
								aria-controls="${holderId}-schedule" aria-selected="true">`).text('Schedule & Details')));var cal=$(`<div class='event-iframe'><iframe src="https://calendar.google.com/calendar/embed?height=300&amp;wkst=1&amp;bgcolor=%23ffffff&amp;ctz=America%2FToronto&amp;src=${cal_id}&amp;color=%23039BE5&amp;showPrint=0&amp;showCalendars=0&amp;showNav=1&amp;showTabs=0&amp;dates=${dateRange}" style="border-width:0" width="100%" height="550" frameborder="0" scrolling="no"></iframe></div>`);tabs.append($(`<div class="tab-pane fade show active" id="${holderId}-schedule" role="tabpanel" aria-labelledby="${holderId}-schedule-tab">`).append(cal).append($(`<div id=${holderId}-coming class='events events-default'>`)).append($(`<div id=${holderId}-past class='events events-default'>`)))
for(var i in keywords){var kw=keywords[i];navi.append($(`<li class="nav-item">`).append($(`<a class="nav-link" id="${holderId}-${kw}-tab" data-toggle="tab" href="#${holderId}-${kw}" role="tab"
								aria-controls="${holderId}-${kw}" aria-selected="true">`).text(`${kw}`)));tabs.append($(`<div class="tab-pane fade" id="${holderId}-${kw}" role="tabpanel" aria-labelledby="${holderId}-${kw}-tab">`).append($(`<h2>${kw} Information</h2>`)).append($(`<div id=${holderId}-${kw}-content class='events'>`)))}
var url='https://www.googleapis.com/calendar/v3/calendars/'+cal_id+'/events?key=AIzaSyDWg09oizBovJjsIYQGVadbdOF6SNSxvTM'
formatGoogleCalendar.init({calendarUrl:url,past:true,upcoming:true,sameDayTimes:true,dayNames:true,itemsTagName:'li',upcomingSelector:'#'+holderId+'-coming',pastSelector:'#'+holderId+'-past',recurringEvents:true,upcomingHeading:'<h2>Upcoming weeks</h2>',pastHeading:'<h2>Past weeks</h2>',eventFormat:['*summary*','*date*','*description*','*location*'],subEventFormat:['*summary*',' ','*date*','*location*'],eventWithLocationAsSubEvent:true,keywords:keywords,keywordPrefix:holderId});}